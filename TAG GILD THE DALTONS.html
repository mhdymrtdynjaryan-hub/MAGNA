<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DocCraft - ثبت اسناد</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: #f4f4f4;
      --bg-dark: #1f1f1f;
      --text-light: #ffffff;
      --text-dark: #000000;
      --primary: #4a90e2;
      --font: 'Vazirmatn', sans-serif;
    }
    body {
      margin: 0;
      font-family: var(--font);
      transition: all 0.3s ease-in-out;
    }
    body.light {
      background: var(--bg-light);
      color: var(--text-dark);
    }
    body.dark {
      background: var(--bg-dark);
      color: var(--text-light);
    }
    header {
      padding: 1rem;
      background: var(--primary);
      color: white;
      text-align: center;
      font-size: 1.5rem;
    }
    .container {
      padding: 1rem;
      max-width: 800px;
      margin: auto;
    }
    .doc-form input, .doc-form textarea, .doc-form button {
      width: 100%;
      padding: 0.75rem;
      margin: 0.5rem 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    .docs {
      margin-top: 2rem;
    }
    .doc {
      padding: 1rem;
      background: #eee;
      border-radius: 10px;
      margin-bottom: 1rem;
    }
    .settings {
      position: fixed;
      top: 0; right: 0;
      width: 300px;
      height: 100vh;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(8px);
      box-shadow: -2px 0 10px rgba(0,0,0,0.2);
      transform: translateX(100%);
      transition: transform 0.3s ease;
      padding: 1rem;
      overflow-y: auto;
    }
    .settings.open {
      transform: translateX(0);
    }
    .settings h2 {
      margin-top: 0;
    }
    .settings button, .settings select {
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 6px;
    }
    .theme-gradient {
      background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a1c4fd);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>
</head>
<body class="light">
  <header>
    DocCraft
    <button onclick="toggleSettings()" style="float:left; font-size:1rem; background:none; border:none; color:white; cursor:pointer;">⚙️</button>
  </header>
  <div class="container">
    <div class="doc-form">
      <input type="text" id="docTitle" placeholder="عنوان سند" />
      <textarea id="docContent" placeholder="متن سند"></textarea>
      <button onclick="saveDocument()">ذخیره سند</button>
    </div>
    <input type="text" id="searchInput" placeholder="جستجوی سند..." oninput="searchDocs()" />
    <div class="docs" id="docsContainer"></div>
  </div>
  <div class="settings" id="settingsPanel">
    <h2>تنظیمات</h2>
    <select onchange="setTheme(this.value)">
      <option value="light">تم روشن</option>
      <option value="dark">تم تیره</option>
      <option value="gradient">گرادیان متحرک</option>
    </select>
    <select onchange="setLang(this.value)">
      <option value="fa">فارسی</option>
      <option value="en">English</option>
    </select>
    <select onchange="setFont(this.value)">
      <option value="Vazirmatn">Vazirmatn</option>
      <option value="Tahoma">Tahoma</option>
      <option value="Arial">Arial</option>
    </select>
    <button onclick="logout()">خروج از حساب</button>
  </div>

  <script>
    const docsKey = "doccraft_docs";

    function saveDocument() {
      const title = document.getElementById("docTitle").value;
      const content = document.getElementById("docContent").value;
      if (!title || !content) return alert("تمام فیلدها الزامیست");
      const docs = JSON.parse(localStorage.getItem(docsKey)) || [];
      docs.push({ title, content, date: new Date() });
      localStorage.setItem(docsKey, JSON.stringify(docs));
      renderDocs();
    }

    function renderDocs() {
      const container = document.getElementById("docsContainer");
      const docs = JSON.parse(localStorage.getItem(docsKey)) || [];
      container.innerHTML = docs.map((d, i) => `
        <div class="doc">
          <strong>${d.title}</strong>
          <p>${d.content}</p>
          <small>${new Date(d.date).toLocaleString()}</small>
          <br/>
          <button onclick="deleteDoc(${i})">حذف</button>
        </div>
      `).join("");
    }

    function deleteDoc(index) {
      const docs = JSON.parse(localStorage.getItem(docsKey)) || [];
      docs.splice(index, 1);
      localStorage.setItem(docsKey, JSON.stringify(docs));
      renderDocs();
    }

    function searchDocs() {
      const val = document.getElementById("searchInput").value;
      const docs = JSON.parse(localStorage.getItem(docsKey)) || [];
      const filtered = docs.filter(d => d.title.includes(val) || d.content.includes(val));
      document.getElementById("docsContainer").innerHTML = filtered.map((d, i) => `
        <div class="doc">
          <strong>${d.title}</strong>
          <p>${d.content}</p>
          <small>${new Date(d.date).toLocaleString()}</small>
        </div>
      `).join("");
    }

    function toggleSettings() {
      document.getElementById("settingsPanel").classList.toggle("open");
    }

    function setTheme(t) {
      document.body.className = t === 'gradient' ? 'theme-gradient' : t;
      localStorage.setItem("theme", t);
    }

    function setLang(lang) {
      localStorage.setItem("lang", lang);
      alert(lang === 'fa' ? 'زبان تنظیم شد' : 'Language set');
      // اینجا میشه متون رو تغییر داد بر اساس زبان انتخابی
    }

    function setFont(f) {
      document.body.style.fontFamily = f;
      localStorage.setItem("font", f);
    }

    function logout() {
      localStorage.clear();
      location.reload();
    }

    // Init
    (function init() {
      renderDocs();
      const t = localStorage.getItem("theme") || "light";
      setTheme(t);
      const f = localStorage.getItem("font") || "Vazirmatn";
      setFont(f);
    })();
  </script>
</body>
</html>
